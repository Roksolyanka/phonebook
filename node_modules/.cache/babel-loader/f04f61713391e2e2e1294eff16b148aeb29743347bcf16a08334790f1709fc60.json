{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{selectAuthentificated,selectContactsError,selectContactsFilter,selectContactsIsLoading,selectUserContacts}from'redux/selectors';import{deleteContactsThunk,requestContactsThunk}from'redux/contacts/operations';import{setFilter}from'redux/contacts/reducer';import{ContactForm}from'components/ContactForm';import{ContactList}from'components/ContactList';import{Filter}from'components/Filter';import{Loader}from'components/Loader';import{Modal}from'components/Modal';import{Icon}from'components/Icon';import{ButtonAddContact,ContactsContainer,Container,NewContactContainer,NoContacts,TitleContacts}from'./styled';import{TitlePhonebook}from'components/App/App.styled';import{findItem}from'helpers/helper';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ContactsPage=()=>{const authentificated=useSelector(selectAuthentificated);const contacts=useSelector(selectUserContacts);const isLoading=useSelector(selectContactsIsLoading);const error=useSelector(selectContactsError);const filter=useSelector(selectContactsFilter);const[editingContact,setEditingContact]=useState(null);const[activeContact,setActiveContact]=useState(null);const[showModal,setShowModal]=useState(false);const[isFormVisible,setIsFormVisible]=useState(window.innerWidth>1024);const dispatch=useDispatch();useEffect(()=>{const handleResize=()=>{setIsFormVisible(window.innerWidth>1024);};window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);};},[]);useEffect(()=>{if(!authentificated)return;dispatch(requestContactsThunk());},[authentificated,dispatch]);const handleOpenModal=()=>{setShowModal(true);};const handleCloseModal=()=>{setShowModal(false);setEditingContact(null);setActiveContact(null);};const handleDeleteContact=contactId=>{dispatch(deleteContactsThunk(contactId));};const handleEditContact=contact=>{setEditingContact(contact);};const handleChangeFilter=event=>{dispatch(setFilter(event.target.value));};const filteredContacts=contacts?findItem(contacts,'name',filter):[];return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(TitlePhonebook,{children:\"Phonebook\"}),/*#__PURE__*/_jsxs(Container,{children:[isFormVisible&&/*#__PURE__*/_jsx(ContactForm,{editingContact:editingContact,setEditingContact:setEditingContact,setActiveContact:setActiveContact,onCloseModal:handleCloseModal}),/*#__PURE__*/_jsxs(ContactsContainer,{children:[/*#__PURE__*/_jsx(TitleContacts,{children:\"Contacts\"}),/*#__PURE__*/_jsxs(NewContactContainer,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Create a new contact\"}),/*#__PURE__*/_jsx(ButtonAddContact,{onClick:handleOpenModal,children:/*#__PURE__*/_jsx(Icon,{name:\"icon-user-plus\",width:\"30px\",height:\"30px\"})})]}),isLoading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Oops, some error occured...\",error]}),contacts===null?/*#__PURE__*/_jsx(NoContacts,{children:\"No contacts found.\"}):/*#__PURE__*/_jsx(_Fragment,{children:contacts.length===0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(NoContacts,{children:\"No contacts found.\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Filter,{value:filter,onChange:handleChangeFilter}),filteredContacts.length===0?/*#__PURE__*/_jsx(NoContacts,{children:\"No contact found with this name.\"}):/*#__PURE__*/_jsx(ContactList,{contacts:filteredContacts,onEditContact:handleEditContact,onDeleteContact:handleDeleteContact,activeContact:activeContact,setActiveContact:setActiveContact,onOpenModal:handleOpenModal})]})})]})]}),showModal&&/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleCloseModal,children:/*#__PURE__*/_jsx(ContactForm,{open:showModal,editingContact:editingContact,setEditingContact:setEditingContact,setActiveContact:setActiveContact,onCloseModal:handleCloseModal})})]});};export default ContactsPage;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","selectAuthentificated","selectContactsError","selectContactsFilter","selectContactsIsLoading","selectUserContacts","deleteContactsThunk","requestContactsThunk","setFilter","ContactForm","ContactList","Filter","Loader","Modal","Icon","ButtonAddContact","ContactsContainer","Container","NewContactContainer","NoContacts","TitleContacts","TitlePhonebook","findItem","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ContactsPage","authentificated","contacts","isLoading","error","filter","editingContact","setEditingContact","activeContact","setActiveContact","showModal","setShowModal","isFormVisible","setIsFormVisible","window","innerWidth","dispatch","handleResize","addEventListener","removeEventListener","handleOpenModal","handleCloseModal","handleDeleteContact","contactId","handleEditContact","contact","handleChangeFilter","event","target","value","filteredContacts","children","onCloseModal","onClick","name","width","height","length","onChange","onEditContact","onDeleteContact","onOpenModal","open","onClose"],"sources":["D:/Роксолана/IT/Goit/phonebook/src/pages/ContactsPage/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport {\r\n  selectAuthentificated,\r\n  selectContactsError,\r\n  selectContactsFilter,\r\n  selectContactsIsLoading,\r\n  selectUserContacts,\r\n} from 'redux/selectors';\r\nimport {\r\n  deleteContactsThunk,\r\n  requestContactsThunk,\r\n} from 'redux/contacts/operations';\r\nimport { setFilter } from 'redux/contacts/reducer';\r\n\r\nimport { ContactForm } from 'components/ContactForm';\r\nimport { ContactList } from 'components/ContactList';\r\nimport { Filter } from 'components/Filter';\r\nimport { Loader } from 'components/Loader';\r\nimport { Modal } from 'components/Modal';\r\nimport { Icon } from 'components/Icon';\r\n\r\nimport {\r\n  ButtonAddContact,\r\n  ContactsContainer,\r\n  Container,\r\n  NewContactContainer,\r\n  NoContacts,\r\n  TitleContacts,\r\n} from './styled';\r\nimport { TitlePhonebook } from 'components/App/App.styled';\r\n\r\nimport { findItem } from 'helpers/helper';\r\n\r\nconst ContactsPage = () => {\r\n  const authentificated = useSelector(selectAuthentificated);\r\n  const contacts = useSelector(selectUserContacts);\r\n  const isLoading = useSelector(selectContactsIsLoading);\r\n  const error = useSelector(selectContactsError);\r\n  const filter = useSelector(selectContactsFilter);\r\n  const [editingContact, setEditingContact] = useState(null);\r\n  const [activeContact, setActiveContact] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [isFormVisible, setIsFormVisible] = useState(window.innerWidth > 1024);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsFormVisible(window.innerWidth > 1024);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!authentificated) return;\r\n\r\n    dispatch(requestContactsThunk());\r\n  }, [authentificated, dispatch]);\r\n\r\n  const handleOpenModal = () => {\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n    setEditingContact(null);\r\n    setActiveContact(null);\r\n  };\r\n\r\n  const handleDeleteContact = contactId => {\r\n    dispatch(deleteContactsThunk(contactId));\r\n  };\r\n\r\n  const handleEditContact = contact => {\r\n    setEditingContact(contact);\r\n  };\r\n\r\n  const handleChangeFilter = event => {\r\n    dispatch(setFilter(event.target.value));\r\n  };\r\n\r\n  const filteredContacts = contacts ? findItem(contacts, 'name', filter) : [];\r\n\r\n  return (\r\n    <section>\r\n      <TitlePhonebook>Phonebook</TitlePhonebook>\r\n      <Container>\r\n        {isFormVisible && (\r\n          <ContactForm\r\n            editingContact={editingContact}\r\n            setEditingContact={setEditingContact}\r\n            setActiveContact={setActiveContact}\r\n            onCloseModal={handleCloseModal}\r\n          />\r\n        )}\r\n        <ContactsContainer>\r\n          <TitleContacts>Contacts</TitleContacts>\r\n          <NewContactContainer>\r\n            <p>Create a new contact</p>\r\n            <ButtonAddContact onClick={handleOpenModal}>\r\n              <Icon name=\"icon-user-plus\" width=\"30px\" height=\"30px\"></Icon>\r\n            </ButtonAddContact>\r\n          </NewContactContainer>\r\n          {isLoading && <Loader />}\r\n          {error && <p>Oops, some error occured...{error}</p>}\r\n          {contacts === null ? (\r\n            <NoContacts>No contacts found.</NoContacts>\r\n          ) : (\r\n            <>\r\n              {contacts.length === 0 ? (\r\n                <>\r\n                  <NoContacts>No contacts found.</NoContacts>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Filter value={filter} onChange={handleChangeFilter} />\r\n                  {filteredContacts.length === 0 ? (\r\n                    <NoContacts>No contact found with this name.</NoContacts>\r\n                  ) : (\r\n                    <ContactList\r\n                      contacts={filteredContacts}\r\n                      onEditContact={handleEditContact}\r\n                      onDeleteContact={handleDeleteContact}\r\n                      activeContact={activeContact}\r\n                      setActiveContact={setActiveContact}\r\n                      onOpenModal={handleOpenModal}\r\n                    />\r\n                  )}\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </ContactsContainer>\r\n      </Container>\r\n      {showModal && (\r\n        <Modal open={open} onClose={handleCloseModal}>\r\n          <ContactForm\r\n            open={showModal}\r\n            editingContact={editingContact}\r\n            setEditingContact={setEditingContact}\r\n            setActiveContact={setActiveContact}\r\n            onCloseModal={handleCloseModal}\r\n          />\r\n        </Modal>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ContactsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
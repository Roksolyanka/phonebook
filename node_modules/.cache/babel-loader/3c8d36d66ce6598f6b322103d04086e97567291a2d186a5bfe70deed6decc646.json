{"ast":null,"code":"import{createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';export const $instance=axios.create({baseURL:'https://connections-api.herokuapp.com'});export const setToken=token=>{$instance.defaults.headers['Authorization']=\"Bearer \".concat(token);};export const clearToken=()=>{$instance.defaults.headers['Authorization']='';};export const registerUserThunk=createAsyncThunk('auth/register',async(userData,thunkApi)=>{try{const{data}=await $instance.post('/users/signup',userData);setToken(data.token);return data;}catch(error){return thunkApi.rejectWithValue(error.message);}});export const loginUserThunk=createAsyncThunk('auth/login',async(userData,thunkApi)=>{try{const{data}=await $instance.post('/users/login',userData);setToken(data.token);return data;}catch(error){return thunkApi.rejectWithValue(error.message);}});export const refreshUserThunk=createAsyncThunk('auth/refreshUser',async(_,thunkApi)=>{const state=thunkApi.getState();const token=state.auth.token;try{setToken(token);const{data}=await $instance.get('/users/current');return data;}catch(error){return thunkApi.rejectWithValue(error.message);}});export const logoutUserThunk=createAsyncThunk('auth/logout',async(_,thunkApi)=>{try{const{data}=await $instance.post('/users/logout');clearToken();return data;}catch(error){return thunkApi.rejectWithValue(error.message);}});","map":{"version":3,"names":["createAsyncThunk","axios","$instance","create","baseURL","setToken","token","defaults","headers","concat","clearToken","registerUserThunk","userData","thunkApi","data","post","error","rejectWithValue","message","loginUserThunk","refreshUserThunk","_","state","getState","auth","get","logoutUserThunk"],"sources":["D:/Роксолана/IT/Goit/phonebook/src/redux/auth/operations.js"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nexport const $instance = axios.create({\r\n  baseURL: 'https://connections-api.herokuapp.com',\r\n});\r\n\r\nexport const setToken = token => {\r\n  $instance.defaults.headers['Authorization'] = `Bearer ${token}`;\r\n};\r\n\r\nexport const clearToken = () => {\r\n  $instance.defaults.headers['Authorization'] = '';\r\n};\r\n\r\nexport const registerUserThunk = createAsyncThunk(\r\n  'auth/register',\r\n  async (userData, thunkApi) => {\r\n    try {\r\n      const { data } = await $instance.post('/users/signup', userData);\r\n      setToken(data.token);\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return thunkApi.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const loginUserThunk = createAsyncThunk(\r\n  'auth/login',\r\n  async (userData, thunkApi) => {\r\n    try {\r\n      const { data } = await $instance.post('/users/login', userData);\r\n      setToken(data.token);\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return thunkApi.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const refreshUserThunk = createAsyncThunk(\r\n  'auth/refreshUser',\r\n  async (_, thunkApi) => {\r\n    const state = thunkApi.getState();\r\n    const token = state.auth.token;\r\n    try {\r\n      setToken(token);\r\n      const { data } = await $instance.get('/users/current');\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return thunkApi.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nexport const logoutUserThunk = createAsyncThunk(\r\n  'auth/logout',\r\n  async (_, thunkApi) => {\r\n    try {\r\n      const { data } = await $instance.post('/users/logout');\r\n      clearToken();\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return thunkApi.rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n"],"mappings":"AAAA,OAASA,gBAAgB,KAAQ,kBAAkB,CACnD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,MAAM,CAAAC,SAAS,CAAGD,KAAK,CAACE,MAAM,CAAC,CACpCC,OAAO,CAAE,uCACX,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAC,QAAQ,CAAGC,KAAK,EAAI,CAC/BJ,SAAS,CAACK,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaH,KAAK,CAAE,CACjE,CAAC,CAED,MAAO,MAAM,CAAAI,UAAU,CAAGA,CAAA,GAAM,CAC9BR,SAAS,CAACK,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC,CAAG,EAAE,CAClD,CAAC,CAED,MAAO,MAAM,CAAAG,iBAAiB,CAAGX,gBAAgB,CAC/C,eAAe,CACf,MAAOY,QAAQ,CAAEC,QAAQ,GAAK,CAC5B,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAZ,SAAS,CAACa,IAAI,CAAC,eAAe,CAAEH,QAAQ,CAAC,CAChEP,QAAQ,CAACS,IAAI,CAACR,KAAK,CAAC,CAEpB,MAAO,CAAAQ,IAAI,CACb,CAAE,MAAOE,KAAK,CAAE,CACd,MAAO,CAAAH,QAAQ,CAACI,eAAe,CAACD,KAAK,CAACE,OAAO,CAAC,CAChD,CACF,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAGnB,gBAAgB,CAC5C,YAAY,CACZ,MAAOY,QAAQ,CAAEC,QAAQ,GAAK,CAC5B,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAZ,SAAS,CAACa,IAAI,CAAC,cAAc,CAAEH,QAAQ,CAAC,CAC/DP,QAAQ,CAACS,IAAI,CAACR,KAAK,CAAC,CAEpB,MAAO,CAAAQ,IAAI,CACb,CAAE,MAAOE,KAAK,CAAE,CACd,MAAO,CAAAH,QAAQ,CAACI,eAAe,CAACD,KAAK,CAACE,OAAO,CAAC,CAChD,CACF,CACF,CAAC,CAED,MAAO,MAAM,CAAAE,gBAAgB,CAAGpB,gBAAgB,CAC9C,kBAAkB,CAClB,MAAOqB,CAAC,CAAER,QAAQ,GAAK,CACrB,KAAM,CAAAS,KAAK,CAAGT,QAAQ,CAACU,QAAQ,CAAC,CAAC,CACjC,KAAM,CAAAjB,KAAK,CAAGgB,KAAK,CAACE,IAAI,CAAClB,KAAK,CAC9B,GAAI,CACFD,QAAQ,CAACC,KAAK,CAAC,CACf,KAAM,CAAEQ,IAAK,CAAC,CAAG,KAAM,CAAAZ,SAAS,CAACuB,GAAG,CAAC,gBAAgB,CAAC,CAEtD,MAAO,CAAAX,IAAI,CACb,CAAE,MAAOE,KAAK,CAAE,CACd,MAAO,CAAAH,QAAQ,CAACI,eAAe,CAACD,KAAK,CAACE,OAAO,CAAC,CAChD,CACF,CACF,CAAC,CAED,MAAO,MAAM,CAAAQ,eAAe,CAAG1B,gBAAgB,CAC7C,aAAa,CACb,MAAOqB,CAAC,CAAER,QAAQ,GAAK,CACrB,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAZ,SAAS,CAACa,IAAI,CAAC,eAAe,CAAC,CACtDL,UAAU,CAAC,CAAC,CAEZ,MAAO,CAAAI,IAAI,CACb,CAAE,MAAOE,KAAK,CAAE,CACd,MAAO,CAAAH,QAAQ,CAACI,eAAe,CAACD,KAAK,CAACE,OAAO,CAAC,CAChD,CACF,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}